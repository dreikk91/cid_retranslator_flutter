# GitHub Actions Workflows

–¶–µ–π –ø—Ä–æ–µ–∫—Ç –º—ñ—Å—Ç–∏—Ç—å –¥–≤–∞ CI/CD workflows –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –∑–±—ñ—Ä–∫–∏ –¥–æ–¥–∞—Ç–∫—É CID Retranslator –¥–ª—è Windows.

## üìã Workflows

### 1. `build-windows.yml` - –ë–∞–∑–æ–≤–∞ –∑–±—ñ—Ä–∫–∞

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∑–±—ñ—Ä–∫–∞ –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É push

**–©–æ —Ä–æ–±–∏—Ç—å:**
- ‚úÖ –ó–±–∏—Ä–∞—î Go backend (`cid_retranslator_backend.exe`)
- ‚úÖ –ó–±–∏—Ä–∞—î Flutter Windows –¥–æ–¥–∞—Ç–æ–∫
- ‚úÖ –ü–∞–∫—É—î –≤—Å–µ —Ä–∞–∑–æ–º –≤ –æ–¥–∏–Ω ZIP –∞—Ä—Ö—ñ–≤
- ‚úÖ –ó–±–µ—Ä—ñ–≥–∞—î –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –Ω–∞ 30 –¥–Ω—ñ–≤

**–ö–æ–ª–∏ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è:**
- –ü—Ä–∏ push –≤ –≥—ñ–ª–∫–∏ `main` –∞–±–æ `master`
- –ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ Pull Request
- –í—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ GitHub UI (workflow_dispatch)

### 2. `build-release.yml` - –ü–æ–≤–Ω–∞ –∑–±—ñ—Ä–∫–∞ –∑ —Ä–µ–ª—ñ–∑–æ–º

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –†–æ–∑—à–∏—Ä–µ–Ω–∞ –∑–±—ñ—Ä–∫–∞ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º —Ä–µ–ª—ñ–∑—ñ–≤

**–©–æ —Ä–æ–±–∏—Ç—å:**
- ‚úÖ –ó–±–∏—Ä–∞—î Go backend –∑ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—î—é (`-ldflags="-s -w"`)
- ‚úÖ –ó–±–∏—Ä–∞—î Flutter Windows –¥–æ–¥–∞—Ç–æ–∫
- ‚úÖ –í–∏–∫–æ–Ω—É—î –∞–Ω–∞–ª—ñ–∑ –∫–æ–¥—É Flutter
- ‚úÖ –ö–æ–ø—ñ—é—î –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏ (config, icons, README)
- ‚úÖ –°—Ç–≤–æ—Ä—é—î –≤–µ—Ä—Å—ñ–æ–Ω–æ–≤–∞–Ω—ñ ZIP –∞—Ä—Ö—ñ–≤–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î GitHub Release –ø—Ä–∏ push —Ç–µ–≥—ñ–≤**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç—É:**
```
cid_retranslator_v1.0.0_windows/
‚îú‚îÄ‚îÄ cid_retranslator.exe           # Flutter –¥–æ–¥–∞—Ç–æ–∫
‚îú‚îÄ‚îÄ cid_retranslator_backend.exe   # Go backend
‚îú‚îÄ‚îÄ data/                          # Flutter —Ä–µ—Å—É—Ä—Å–∏
‚îú‚îÄ‚îÄ config.yaml                    # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (—è–∫—â–æ —î)
‚îú‚îÄ‚îÄ icon.ico, icon.png             # –Ü–∫–æ–Ω–∫–∏ (—è–∫—â–æ —î)
‚îî‚îÄ‚îÄ README*.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## üöÄ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### –ó–≤–∏—á–∞–π–Ω–∞ –∑–±—ñ—Ä–∫–∞ (development)

–ü—Ä–æ—Å—Ç–æ –∑–∞–∫–æ–º—ñ—Ç—å—Ç–µ –∑–º—ñ–Ω–∏:
```bash
git add .
git commit -m "–í–∞—à—ñ –∑–º—ñ–Ω–∏"
git push
```

–ó–±—ñ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è —ñ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π —É –≤–∫–ª–∞–¥—Ü—ñ **Actions**.

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–ª—ñ–∑—É

1. **–°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–µ–≥ –∑ –≤–µ—Ä—Å—ñ—î—é:**
   ```bash
   git tag -a v1.0.0 -m "Release version 1.0.0"
   git push origin v1.0.0
   ```

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è:**
   - GitHub Release –∑ –≤–µ—Ä—Å—ñ—î—é `v1.0.0`
   - Release notes (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ)
   - ZIP —Ñ–∞–π–ª `cid_retranslator_v1.0.0_windows.zip` –ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–∏–π –¥–æ —Ä–µ–ª—ñ–∑—É

### –†—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É **Actions** –Ω–∞ GitHub
2. –í–∏–±–µ—Ä—ñ—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω–∏–π workflow
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Run workflow**
4. –í–∏–±–µ—Ä—ñ—Ç—å –≥—ñ–ª–∫—É —ñ –∑–∞–ø—É—Å—Ç—ñ—Ç—å

## üì¶ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–±—ñ—Ä–∫–∏

### –ó –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ñ–≤ (development builds):
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É **Actions** ‚Üí –≤–∏–±–µ—Ä—ñ—Ç—å workflow run
2. –ü—Ä–æ–∫—Ä—É—Ç—ñ—Ç—å –¥–æ —Å–µ–∫—Ü—ñ—ó **Artifacts**
3. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ `cid_retranslator_windows.zip`

### –ó —Ä–µ–ª—ñ–∑—ñ–≤ (production builds):
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É **Releases** –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
2. –í–∏–±–µ—Ä—ñ—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω—É –≤–µ—Ä—Å—ñ—é
3. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ `cid_retranslator_vX.X.X_windows.zip` –∑ Assets

## üõ†Ô∏è –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

**–í–µ—Ä—Å—ñ—ó:**
- Go: 1.23
- Flutter: 3.27.0 (stable channel)
- Windows runner: windows-latest

**–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:**
- Go build flags: `-ldflags="-s -w"` (–≤–∏–¥–∞–ª–µ–Ω–Ω—è debug —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó)
- Flutter: `--release` build
- –ö–µ—à—É–≤–∞–Ω–Ω—è Go modules —Ç–∞ Flutter SDK

**–ß–∞—Å –∑–±—ñ—Ä–∫–∏:** ~5-10 —Ö–≤–∏–ª–∏–Ω

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ –≤–µ—Ä—Å—ñ—ó –∞–±–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–±—ñ—Ä–∫–∏, —Ä–µ–¥–∞–≥—É–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ —Ñ–∞–π–ª–∏:

- Go –≤–µ—Ä—Å—ñ—è: –∑–º—ñ–Ω—ñ—Ç—å `go-version` –≤ setup-go action
- Flutter –≤–µ—Ä—Å—ñ—è: –∑–º—ñ–Ω—ñ—Ç—å `flutter-version` –≤ setup-flutter action
- –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ–∞–π–ª–∏ –≤ –ø–∞–∫–µ—Ç: –¥–æ–¥–∞–π—Ç–µ Copy-Item –∫–æ–º–∞–Ω–¥–∏ –≤ —Å–µ–∫—Ü—ñ—é "Package"

## üìù –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è

```bash
# –ú—ñ–Ω–æ—Ä–Ω–∏–π —Ä–µ–ª—ñ–∑
git tag -a v1.1.0 -m "Added new features"

# –ü–∞—Ç—á (bug fix)
git tag -a v1.0.1 -m "Fixed critical bug"

# –ú–∞–∂–æ—Ä–Ω–∏–π —Ä–µ–ª—ñ–∑
git tag -a v2.0.0 -m "Breaking changes"

# –ó–∞–≤–∂–¥–∏ –ø—É—à—ñ—Ç—å —Ç–µ–≥
git push origin v1.0.0
```

## ‚ùì Troubleshooting

**–ó–±—ñ—Ä–∫–∞ –ø–∞–¥–∞—î?**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ Actions
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ `main_headless.go` –∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ Flutter –ø—Ä–æ–µ–∫—Ç –∑–±–∏—Ä–∞—î—Ç—å—Å—è: `flutter build windows`

**–†–µ–ª—ñ–∑ –Ω–µ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è?**
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ —Ç–µ–≥ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ `v` (v1.0.0, v2.1.3)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é —î –¥–æ—Å—Ç—É–ø –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–ª—ñ–∑—ñ–≤

**–ê—Ä—Ç–µ—Ñ–∞–∫—Ç –ø—É—Å—Ç–∏–π?**
- –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏ –∑–±—ñ—Ä–∫–∏
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ –æ–±–∏–¥–≤–∞ –ø—Ä–æ–µ–∫—Ç–∏ –∑–±–∏—Ä–∞—é—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
